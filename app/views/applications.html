<div class="row">
  <div class="col-md-10">
    <h3>Applications</h3>
  </div>
  <div class="col-md-2 pull-right">
    <insight-menu actions="menuActions"></insight-menu>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <form class="form form-inline">
      <div class="form-group">
        <label>
          Filter
          <input type="search" class="form-control input-sm" ng-model="applicationFilter" ng-change="ctrl.filterApplications()">
        </label>
      </div>
    </form>
    <button style="display:none" ng-click="ctrl.demoMultiPageModal()">Fire up multi-page modal</button>
    <h2 ng-if="!applicationsLoaded" class="text-center" style="margin-bottom: 250px">
      <span us-spinner="{radius:30, width:8, length: 16}"></span>
    </h2>
    <table ng-if="applicationsLoaded" class="table table-striped">
      <thead>
        <th sort-toggle sorting-model="sorting" key="name" label="Name" default="true" on-change="ctrl.filterApplications()"></th>
        <th sort-toggle sorting-model="sorting" parent-reverse="reverse" key="attributes.createTs" label="Created" on-change="ctrl.filterApplications()"></th>
        <th sort-toggle sorting-model="sorting" parent-reverse="reverse" key="attributes.updateTs" label="Updated" on-change="ctrl.filterApplications()"></th>
      </thead>
      <tbody>
        <tr ng-repeat="application in ctrl.resultPage()">
          <td>
            <a ui-sref=".application({ application: application.name })">
              {{ application.name }}
            </a>
          </td>
          <td>
            {{ application.attributes.createTs | dateFromTimestamp | date: 'yyyy-MM-dd' }}
          </td>
          <td>
            {{ application.attributes.updateTs | dateFromTimestamp | date: 'yyyy-MM-dd' }}
          </td>
        </tr>
      </tbody>
    </table>
    <pagination ng-if="applicationsLoaded"
                total-items="filteredApplications.length"
                max-size="pagination.maxSize"
                ng-model="pagination.currentPage"
      ></pagination>
  </div>
</div>
