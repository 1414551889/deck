<div class="row server-group"
     ng-class="{active: $state.includes('*.serverGroup', {region: serverGroup.region, accountId: serverGroup.account, serverGroup: serverGroup.name})}">
  <div class="summary clearfix">
    <a ui-sref=".serverGroup({region: serverGroup.region, accountId: serverGroup.account, serverGroup: serverGroup.name})">
      <span class="glyphicon glyphicon-th"></span> {{serverGroup.name}}
    </a>
    <div class="load-balancers pull-right text-right">
      <a href
         ng-repeat="loadBalancer in serverGroup.loadBalancers | orderBy:'name'"
         ui-sref=".loadBalancerDetails({region: loadBalancer.region, accountId: loadBalancer.account, name: loadBalancer.name})"
         ui-sref-active="active"
         tooltip="{{loadBalancer.name}}"
        ><span class="glyphicon glyphicon-cloud"></span>
      </a>
    </div>
  </div>
  <div class="details">
    <div class="build-title">
      <a ng-if="serverGroup.buildInfo.jenkins.host"
         href="{{ serverGroup.buildInfo.jenkins.host }}job/{{ serverGroup.buildInfo.jenkins.name }}/{{ serverGroup.buildInfo.jenkins.number }}/"
         target="_blank">
          Build #{{ serverGroup.buildInfo.jenkins.number }}:
      </a>
      <span ng-if="!serverGroup.buildInfo.jenkins.host">
          (No build info)
      </span>
      <health-counts container="serverGroup"></health-counts>
    </div>
    <div class="instances" ng-if="!instanceDisplay.displayed">
      <button class="btn btn-default btn-xs" ng-click="instanceDisplay.displayed = true">Show all {{serverGroup.asg.instances.length}} instances</button>
    </div>
    <div class="instances" ng-if="instanceDisplay.displayed">
      <a class="instance health-status-{{instance.healthStatus}}"
         ng-repeat="instance in serverGroup.asg.instances"
         tooltip="{{instance.instanceId}}"
         ui-sref=".instanceDetails({instanceId: instance.instanceId })"
         ui-sref-active="active">
        <span class="sr-only">{{instance.instanceId}}</span></a>
    </div>
  </div>
</div>
