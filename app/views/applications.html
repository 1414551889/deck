<div class="row applications global-search-header">
  <div class="col-md-2">
    <h3>Applications</h3>
  </div>
  <div class="col-md-4">
    <form class="form form-horizontal">
      <div class="form-group">
        <div class="col-md-12">
          <input type="search"
                 placeholder="Search applications"
                 class="form-control input-md"
                 focus
                 ng-model="applicationFilter"
                 ng-change="ctrl.filterApplications()"/>
        </div>
      </div>
    </form>
  </div>
  <div class="col-md-offset-4 col-md-2 pull-right">
    <insight-menu actions="menuActions"></insight-menu>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h2 ng-if="!applicationsLoaded" class="text-center" style="margin-bottom: 250px">
      <span us-spinner="{radius:30, width:8, length: 16}"></span>
    </h2>
    <table ng-if="applicationsLoaded" class="table table-striped">
      <thead ng-if="partiallyLoaded">
        <tr>
          <th sort-toggle key="name" label="Name" default="true"></th>
          <th class="loading-header"><div us-spinner="{left: '-4px', radius:4, width:2, length: 3}"></div> Loading: Created, Updated, Owner</th>
        </tr>
      </thead>
      <tbody ng-if="partiallyLoaded">
        <tr ng-repeat="application in ctrl.resultPage()">
          <td>
            <a ui-sref=".application({ application: application.name })">
              {{ application.name }}
            </a>
          </td>
        </tr>
      </tbody>
      <thead ng-if="fullyLoaded">
        <tr>
          <th sort-toggle key="name" label="Name" default="true"></th>
          <th sort-toggle key="attributes.createTs" label="Created"></th>
          <th sort-toggle key="attributes.updateTs" label="Updated"></th>
          <th sort-toggle key="attributes.email" label="Owner"></th>
        </tr>
      </thead>
      <tbody ng-if="fullyLoaded">
        <tr ng-repeat="application in ctrl.resultPage()">
          <td>
            <a ui-sref=".application({ application: application.name })">
              {{ application.name }}
            </a>
          </td>
          <td>
            {{ application.attributes.createTs | relativeTime }}
          </td>
          <td>
            {{ application.attributes.updateTs | relativeTime }}
          </td>
          <td>
            {{ application.attributes.email }}
          </td>
        </tr>
      </tbody>
    </table>
    <pagination ng-if="applicationsLoaded"
                total-items="filteredApplications.length"
                max-size="pagination.maxSize"
                ng-model="pagination.currentPage"
      ></pagination>
  </div>
</div>
